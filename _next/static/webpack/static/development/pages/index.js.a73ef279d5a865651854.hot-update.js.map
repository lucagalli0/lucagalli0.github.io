{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.a73ef279d5a865651854.hot-update.js","sources":["webpack:///./src/components/Carousel/Carousel.js"],"sourcesContent":["import * as React from 'react';\nimport { Box, Button } from '@chakra-ui/core';\nimport { useMotionValue, motion, useAnimation } from 'framer-motion';\n\nexport default function Carousel({ children, width = 500 }) {\n  const x = useMotionValue(0);\n\n  return (\n    <Box overflow=\"hidden\">\n      <Track\n        padding={padding}\n        velocity={velocity}\n        transition={transition}\n        allowSlideToLast={allowSlideToLast}\n        overflow={overflow}\n        style={{ x }}\n      >\n        {children.map((child, i) => (\n          <Item key={i} gap={gap} padding={padding} index={i} offset={x}>\n            {child}\n          </Item>\n        ))}\n      </Track>\n    </Box>\n  );\n}\n\nconst MotionBox = motion.custom(Box);\n\nconst Track = ({ children, padding, gap, velocity, transition, allowSlideToLast, style }) => {\n  const [trackRef, trackDimensions] = useDimensions({ liveMeasure: false });\n  const controls = useAnimation();\n\n  const { state, dispatch } = useContext(Context);\n\n  console.log(state);\n  const negativeItems = state.items.map((item) => item * -1 + trackDimensions.x || 0);\n\n  const lastTwo = state.items.slice(-2);\n  const lastItem = lastTwo[1] - lastTwo[0];\n\n  function onDragEnd(event, info) {\n    const offset = info.offset.x;\n    const correctedVelocity = info.velocity.x * velocity;\n\n    const direction = correctedVelocity < 0 || offset < 0 ? 1 : -1;\n    const startPosition = info.point.x - offset;\n\n    const endOffset = direction === 1 ? Math.min(correctedVelocity, offset) : Math.max(correctedVelocity, offset);\n    const endPosition = startPosition + endOffset;\n\n    const closestPosition = negativeItems.reduce((prev, curr) =>\n      Math.abs(curr - endPosition) < Math.abs(prev - endPosition) ? curr : prev\n    );\n\n    const activeSlide = negativeItems.indexOf(closestPosition);\n    dispatch({ type: 'SET_ACTIVE_ITEM', activeItem: activeSlide });\n\n    controls.start({\n      x: closestPosition,\n      transition: {\n        type: 'spring',\n        velocity: info.velocity.x,\n        stiffness: transition.stiffness,\n        damping: transition.damping,\n        mass: transition.mass,\n      },\n    });\n  }\n\n  return (\n    <MotionBox\n      display=\"flex\"\n      flexWrap=\"nowrap\"\n      minW=\"min-content\"\n      ref={trackRef}\n      style={style}\n      padding={padding}\n      animate={controls}\n      drag=\"x\"\n      dragConstraints={{\n        left: lastItem + gap - trackDimensions.width,\n        right: 0,\n      }}\n      onDragEnd={onDragEnd}\n    >\n      {children}\n    </MotionBox>\n  );\n};\n\nfunction getDimensionObject(node) {\n  const rect = node.getBoundingClientRect();\n\n  return {\n    width: rect.width,\n    height: rect.height,\n    top: 'x' in rect ? rect.x : rect.top,\n    left: 'y' in rect ? rect.y : rect.left,\n    x: 'x' in rect ? rect.x : rect.left,\n    y: 'y' in rect ? rect.y : rect.top,\n    right: rect.right,\n    bottom: rect.bottom,\n  };\n}\n\nfunction useDimensions({ liveMeasure = true }) {\n  const [dimensions, setDimensions] = React.useState({});\n  const [node, setNode] = React.useState(null);\n\n  const ref = React.useCallback((node) => {\n    setNode(node);\n  }, []);\n\n  React.useLayoutEffect(() => {\n    if (node) {\n      const measure = () => window.requestAnimationFrame(() => setDimensions(getDimensionObject(node)));\n      measure();\n\n      if (liveMeasure) {\n        window.addEventListener('resize', measure);\n        window.addEventListener('scroll', measure);\n\n        return () => {\n          window.removeEventListener('resize', measure);\n          window.removeEventListener('scroll', measure);\n        };\n      }\n    }\n  }, [node]);\n\n  return [ref, dimensions, node];\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAQA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AAAA;AADA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AACA;AAKA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAFA;AAUA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA;AACA;AACA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;;A","sourceRoot":""}